(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{24:function(e,t,a){e.exports=a(35)},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),o=a.n(l),c=a(5),s=a(1),m=a(3),u=a.n(m),i=a(8),p=a(2);function d(){var e=Object(s.f)();return r.a.createElement("div",{className:"h-16 bg-blue-700 flex items-center"},r.a.createElement("div",{className:"container mx-auto pl-5"},localStorage.getItem("userId")?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{to:"/",className:"text-white cursor-pointer hover:text-gray-400 transition duration-150 lg:ml-3"},"Home"),r.a.createElement(c.b,{to:"/polls/create",className:"text-white cursor-pointer hover:text-gray-400 transition duration-150 ml-3"},"Create Poll")):null),r.a.createElement("div",{className:"container mx-auto pr-5 text-right"},localStorage.getItem("userId")?r.a.createElement("button",{className:"text-white cursor-pointer hover:text-gray-400 transition duration-150 lg:mr-3",onClick:function(){return localStorage.clear(),void e.push("/homelg")}},"Logout"):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{to:"/login",className:"text-white cursor-pointer hover:text-gray-400 transition duration-150 mr-3"},"Login"),r.a.createElement(c.b,{to:"/signup",className:"text-white cursor-pointer hover:text-gray-400 transition duration-150 lg:mr-3"},"Register"))))}var b=a(21);function f(e){var t=e.children,a=e.onClick;return r.a.createElement("button",{onClick:a,className:"bg-blue-600 text-white px-3 py-2 border border-blue-600 active:border-blue-700 text-sm rounded-sm hover:bg-blue-700 transition duration-150 ease-in-out"},t)}var h=a(23);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement("div",{className:"w-full min-h-screen bg-gradient-to-r from-white to-blue-300"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:function(){var e=Object(s.f)();localStorage.getItem("userId")||e.push("/homelg");var t=localStorage.getItem("userId"),a=Object(n.useState)([]),l=Object(p.a)(a,2),o=l[0],m=l[1],b=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://3.97.6.204:4000/my-polls/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,m(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){b()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement("div",{className:"container mx-auto px-5"},r.a.createElement("h1",{className:"text-5xl font-bold text-gray-800 text-center my-10"},"Welcome!"),r.a.createElement("div",{className:"w-full max-w-3xl mx-auto bg-gradient-to-r from-blue-100 to-white shadow"},r.a.createElement("div",{className:"w-full px-4 py-4 border-b border-gray-400"},r.a.createElement("h2",{className:"lg:text-2xl text-center"},"Here you can see the polls you have created")),o.map((function(e){return r.a.createElement("div",{key:e._id,className:"w-full px-4 py-4 border-b border-gray-400 flex justify-between"},e.title,r.a.createElement(c.b,{className:"bg-blue-600 text-white px-3 py-2 border border-blue-600 active:border-blue-700 text-sm rounded-sm hover:bg-blue-700 transition duration-150 ease-in-out",to:"/polls/".concat(e._id)},"View poll"))}))),r.a.createElement("p",{className:"text-center leading-normal mt-8"},"Click on 'Create Poll' from the NavBar to create a new poll.")))}}),r.a.createElement(s.a,{path:"/homelg",component:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement("div",{className:"container mx-auto px-6 pt-10"},r.a.createElement("div",{className:"container px-3 mx-auto flex flex-wrap flex-col md:flex-row items-center"},r.a.createElement("div",{className:"flex flex-col w-full md:w-2/5 justify-center items-start text-center md:text-left"},r.a.createElement("p",{className:"uppercase tracking-loose w-full"},"The simplest voting platform"),r.a.createElement("h1",{className:"my-4 text-gray-800 text-5xl font-bold leading-tight"},"Get Opinions from Anywhere!"),r.a.createElement("p",{className:"leading-normal text-2xl mb-8"},"Sign in to create polls. ",r.a.createElement("br",null)," Participants do NOT need an account!"),r.a.createElement("div",{className:"mx-auto lg:mx-0"},r.a.createElement(c.b,{to:"/login",className:"mr-4 bg-blue-600 text-white font-bold rounded my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out"},"Login"),r.a.createElement(c.b,{to:"/signup",className:"bg-blue-600 text-white font-bold rounded my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out"},"Register"))),r.a.createElement("div",{className:"w-full md:w-3/5 py-6 text-center"},r.a.createElement("img",{className:"w-full md:w-4/5 z-50",src:"img/icon.png"})))))}}),r.a.createElement(s.a,{path:"/polls/create",component:function(){var e=Object(s.f)();localStorage.getItem("userId")||e.push("/signup");var t=Object(n.useState)(""),a=Object(p.a)(t,2),l=a[0],o=a[1],m=Object(n.useState)([""]),b=Object(p.a)(m,2),f=b[0],x=b[1],g=Object(n.useState)([]),E=Object(p.a)(g,2),v=E[0],w=E[1],y=Object(n.useState)({}),N=Object(p.a)(y,2),j=N[0],O=N[1],k=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://3.97.6.204:4000/polls",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify({userId:localStorage.getItem("userId"),title:l,choices:f})});case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,t.ok){e.next=9;break}return w(a),e.abrupt("return");case 9:O(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement("div",{className:"container mx-auto px-6 "},r.a.createElement("h1",{className:"text-5xl font-bold text-gray-800 text-center my-10"},"Create a Poll"),r.a.createElement("div",{className:"w-full max-w-3xl mx-auto rounded shadow-md bg-gradient-to-r from-blue-100 to-white"},j.pollId?r.a.createElement("div",{className:"py-5 px-8"},r.a.createElement("p",{className:"text-gray-800 py-3"},"Poll created successfully! Click on the link to see your poll, or copy it to share it with others!"),r.a.createElement("div",{className:"w-full mb-2 bg-green-100 text-green-500 border border-green-500 rounded py-3 px-2"},r.a.createElement(c.b,{to:"/polls/".concat(j.pollId)},"http://3.97.6.204/#/polls/",j.pollId))):null,j.pollId?null:r.a.createElement("div",{className:"py-5 px-8"},v.length>0?r.a.createElement(n.Fragment,null,v.map((function(e,t){return r.a.createElement("p",{key:t,className:"w-full mb-2 bg-red-500 text-white py-3 px-2 rounded"},e.message)}))):null,r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{htmlFor:"title",className:"text-sm mb-2 inline-block"},"Enter the title of the poll:"),r.a.createElement("input",{onChange:function(e){return o(e.target.value)},value:l,name:"title",id:"title",type:"text",className:"w-full py-2 border border-gray-400 rounded px-4"})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{className:"text-sm mb-2 inline-block"},"Enter all the possible answers for this poll:"),f.map((function(e,t){return r.a.createElement("div",{key:t,className:"w-full flex items-center mb-2"},r.a.createElement("input",{onChange:function(e){return function(e,t){var a=f.map((function(a,n){return n===e?t:a}));x(a)}(t,e.target.value)},key:t,type:"text",value:e,className:"w-full py-2 border border-gray-400 rounded px-4"}),r.a.createElement("button",{onClick:function(){return function(e){var t=f.filter((function(t,a){return a!==e}));x(t)}(t)},className:"py-2 ml-2 px-3 bg-red-500 text-white rounded hover:bg-red-600"},"Remove"))}))),r.a.createElement("button",{onClick:function(){x([].concat(Object(h.a)(f),[""]))},className:"bg-blue-600 text-white px-3 py-2 border border-blue-600 active:border-blue-700 text-sm rounded-sm hover:bg-blue-700 transition duration-150 ease-in-out"},"Add choice"),r.a.createElement("div",{className:"mt-12 mb-6 text-center"},r.a.createElement("button",{onClick:k,className:"bg-blue-600 text-white font-bold rounded py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out"},"Create Poll"))))))}}),r.a.createElement(s.a,{path:"/polls/:poll",component:function(e){var t=e.match,a=Object(n.useState)(null),l=Object(p.a)(a,2),o=l[0],c=l[1],s=Object(n.useState)(null),m=Object(p.a)(s,2),h=m[0],x=m[1],g=Object(n.useState)(!1),E=Object(p.a)(g,2),v=E[0],w=E[1],y=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://3.97.6.204:4000/polls/".concat(t.params.poll));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,x(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.ipify.org?format=json");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,c(a.ip);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){y()}),[v]),Object(n.useEffect)((function(){N()}),[]);var j=function(){var e=Object(i.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(o),console.log(a),e.next=4,fetch("http://3.97.6.204:4000/polls/".concat(t.params.poll),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:o,choice:a})});case 4:w(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=0;return h.choices.forEach((function(t){e+=t.count})),e};return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement("div",{className:"container mx-auto px-5"},r.a.createElement("h1",{className:"text-3xl text-center my-3 font-bold text-gray-800"},"Welcome to the Simplest Voting App"),r.a.createElement("p",{className:"pb-6 text-center"},'Please cast your vote, or click on "View Results" to see this poll\'s statistics.'),h?r.a.createElement("div",{className:"w-full max-w-3xl mx-auto  bg-gradient-to-r from-blue-100 to-white shadow"},r.a.createElement("header",{className:"px-5 py-4 flex justify-between items-center"},h.title,v&&r.a.createElement("span",null,O()," votes"),r.a.createElement(f,{onClick:function(){return w(!0)}},"View results")),h.choices.map((function(e){return r.a.createElement("div",{className:"px-5 py-4 border-t border-gray-400 flex justify-between items-center",key:e._id},e.name,v?r.a.createElement("span",{className:"text-blue-500"}," ",function(e){var t=O();return 0===t?0:Math.round(e.count/t*100)}(e),"% "):r.a.createElement(f,{onClick:function(){return j(e._id)}},"Vote"))}))):null),r.a.createElement("div",{className:"flex justify-between content-center"},v?r.a.createElement("span",{className:"mx-auto my-10 max-w-full"},function(){console.log(h);for(var e=[["Option","Number of votes"]],t=0;t<h.choices.length;t++)e.push([h.choices[t].name,h.choices[t].count]),console.log("here is voteData: ",e);return r.a.createElement(b.a,{chartType:"PieChart",options:{title:h.title},graph_id:"PollPieChart",width:"320px",height:"320px",data:e,legend_toggle:!0})}()):null),r.a.createElement("div",{className:"container mx-auto px-5"},r.a.createElement("p",{className:"pt-6 text-center"},"Note 1: This application detects your public IP address so you can vote only once. We do not use this information in any other way."),r.a.createElement("p",{className:"pt-3 pb-10 text-center"},"Note 2: This application may not work if you are using an AddBlocker. If that's the case open this page in an Incognito Window or change to a different browser.")))}}),r.a.createElement(s.a,{path:"/login",component:function(){var e=Object(s.f)();localStorage.getItem("userId")&&e.push("/");var t=Object(n.useState)(""),a=Object(p.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(""),m=Object(p.a)(c,2),b=m[0],f=m[1],h=Object(n.useState)([]),x=Object(p.a)(h,2),g=x[0],E=x[1],v=function(){var t=Object(i.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://3.97.6.204:4000/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:b})});case 2:return a=t.sent,t.next=5,a.json();case 5:if(n=t.sent,a.ok){t.next=9;break}return E(n),t.abrupt("return");case 9:n&&console.log(n),localStorage.setItem("token","Bearer "+n.token),localStorage.setItem("userId",n.userId),e.push("/");case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement("div",{className:"container mx-auto px-6"},r.a.createElement("h1",{className:"text-5xl font-bold text-gray-800 text-center my-10"},"Login"),g.length>0?r.a.createElement(n.Fragment,null,g.map((function(e,t){return r.a.createElement("p",{key:t,className:"w-full mb-2 bg-red-500 text-white py-3 px-2 rounded"},e.message)}))):null,r.a.createElement("div",{className:"w-full max-w-3xl mx-auto rounded shadow-md bg-gradient-to-r from-blue-100 to-white"},r.a.createElement("div",{className:"py-5 px-8"},r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{htmlFor:"email",className:"text-sm mb-2 inline-block"},"Email:"),r.a.createElement("input",{placeholder:"Enter your email",onChange:function(e){return o(e.target.value)},value:l,name:"email",id:"email",type:"email",className:"w-full py-2 border border-gray-400 rounded px-4"})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{htmlFor:"password",className:"text-sm mb-2 inline-block"},"Password:"),r.a.createElement("input",{placeholder:"Enter your password",onChange:function(e){return f(e.target.value)},value:b,name:"password",id:"password",type:"password",className:"w-full py-2 border border-gray-400 rounded px-4"})),r.a.createElement("div",{className:"mt-12 mb-6 text-center"},r.a.createElement("button",{onClick:v,className:"bg-blue-600 text-white font-bold rounded py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out"},"Login"))))))}}),r.a.createElement(s.a,{path:"/signup",component:function(){var e=Object(s.f)();localStorage.getItem("userId")&&e.push("/");var t=Object(n.useState)(""),a=Object(p.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(""),m=Object(p.a)(c,2),b=m[0],f=m[1],h=Object(n.useState)(""),x=Object(p.a)(h,2),g=x[0],E=x[1],v=Object(n.useState)([]),w=Object(p.a)(v,2),y=w[0],N=w[1],j=function(){var t=Object(i.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://3.97.6.204:4000/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,email:b,password:g})});case 2:return a=t.sent,t.next=5,a.json();case 5:if(n=t.sent,a.ok){t.next=9;break}return N(n),t.abrupt("return");case 9:console.log(n),e.push("/login");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement("div",{className:"container mx-auto px-6 "},r.a.createElement("h1",{className:"text-5xl font-bold text-gray-800 text-center my-10"},"Register"),y.length>0?r.a.createElement(n.Fragment,null,y.map((function(e,t){return r.a.createElement("p",{key:t,className:"w-full mb-2 bg-red-500 text-white py-3 px-2 rounded"},e.message)}))):null,r.a.createElement("div",{className:"w-full max-w-3xl mx-auto rounded shadow-md  bg-gradient-to-r from-blue-100 to-white"},r.a.createElement("div",{className:"py-5 px-8"},r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{htmlFor:"Username",className:"text-sm mb-2 inline-block"},"Username:"),r.a.createElement("input",{placeholder:"Enter a username",onChange:function(e){return o(e.target.value)},name:"username",id:"username",type:"username",className:"w-full py-2 border border-gray-400 rounded px-4"})),r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{htmlFor:"email",className:"text-sm mb-2 inline-block"},"Email:"),r.a.createElement("input",{placeholder:"Enter an email",onChange:function(e){return f(e.target.value)},value:b,name:"email",id:"email",type:"email",className:"w-full py-2 border border-gray-400 rounded px-4"})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("label",{htmlFor:"password",className:"text-sm mb-2 inline-block"},"Password:"),r.a.createElement("input",{placeholder:"Enter a password",onChange:function(e){return E(e.target.value)},value:g,name:"password",id:"password",type:"password",className:"w-full py-2 border border-gray-400 rounded px-4"})),r.a.createElement("div",{className:"mt-12 mb-6 text-center"},r.a.createElement("button",{onClick:j,className:"bg-blue-600 text-white font-bold rounded py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out"},"SignUp"))))))}}))))),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.59b0e212.chunk.js.map